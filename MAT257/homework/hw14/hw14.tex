\documentclass{article}
\usepackage[margin=1.0in]{geometry}
\usepackage{amssymb,amsmath,amsthm,amsfonts}
\usepackage{enumitem}
\usepackage{xcolor}
\usepackage{mathtools}
\usepackage{systeme}

% My boxes
\usepackage[breakable]{tcolorbox}

% \RequirePackage{background}
% \backgroundsetup{
%     scale=1,
%     color=black,
%     opacity=1,
%     angle=0,
%     contents={
%         \includegraphics[width=\paperwidth,height=\paperheight]{\nightmodebackground}
%     }
% }

\definecolor{pastelblue}{RGB}{96, 145, 245}
\definecolor{pastelgreen}{RGB}{106, 235, 135}
\definecolor{darkgray}{RGB}{60, 60, 60}
\definecolor{lightgray}{RGB}{180, 180, 180}
\definecolor{offwhite}{RGB}{225, 225, 245}


\pagecolor{darkgray}
\color{offwhite}

\newcommand{\Z}{\mathbf{Z}}
\newcommand{\N}{\mathbf{N}}
\newcommand{\R}{\mathbf{R}}
\newcommand{\Q}{\mathbf{Q}}
\newcommand{\C}{\mathbf{C}}

\newcommand{\id}{\mathrm{id}}
\newcommand{\op}{\mathrm{op}}
\newcommand{\diam}{\mathrm{diam}}
\newcommand{\GL}{\mathrm{GL}}
\newcommand{\Tr}{\mathrm{Tr}}
\newcommand{\im}{\mathrm{im}}
\newcommand{\rank}{\mathrm{rank}}

\newcommand{\cl}[1]{\overline{#1}}

\swapnumbers % places numbers before thm names

\theoremstyle{plain} % The "plain" style italicizes all body text.
	\newtheorem{thm}{Theorem}
		\numberwithin{thm}{section} % Theorem numbers are determined by section.
	\newtheorem{lemma}[thm]{Lemma}
	\newtheorem{prop}[thm]{Proposition}
	\newtheorem{cor}[thm]{Corollary}

\theoremstyle{definition}
    \newtheorem{defn}[thm]{Definition}
	\newtheorem{example}[thm]{Example}
	\newtheorem{exercise}[thm]{Exercise} %Exercise

\begin{document}
    \newtcolorbox{question}[2][]{fonttitle=\large, fontupper=\large, fontlower=\large, title=Question {#2}., oversize, arc=3mm, outer arc=2mm, opacityback=0.9, coltitle=offwhite, colframe=pastelblue, colback=darkgray, colupper=lightgray, collower=lightgray, leftrule=1mm, rightrule=1mm, toprule=1.5mm, titlerule=1mm, bottomrule=1mm, valign=center, add to natural height=5mm, lower separated=false, before lower=\begin{proof}, after lower= \smallbreak \end{proof}, #1, breakable=true}

    \begin{question}{36}
        In Handout \#7, we defined differentiability for functions on open sets. Now we give a definition that works over arbitrary sets. \textcolor{blue}{For this problem, you will need to read Piazza Post @274 and use Theorem 1.1.}
    
        Let $A\subseteq \R^n$ be an arbitrary set, let $f:A\rightarrow \R$ be a function, and let $p\in A$ be a point. We say that $f$ is \textbf{differentiable} at $p$ if there exists an open neighborhood $U$ of $p$ and a function $\widehat{f}:U\rightarrow \R$ such that $\widehat{f}$ is differentiable at $p$ (in the sense of Handout \#7) and $\widehat{f}\vert_{U\cap A}=f\vert_{U\cap A}$.

        \begin{enumerate}[label=(\alph*)]
            \item Prove that $f$ is differentiable at every point of $A$ if and only if $f$ extends to a differentiable function defined on an open set containing $A$.

            \item Suppose further that $A$ is closed. Prove that $f$ is differentiable at every point of $A$ if and only if $f$ extends to a differentiable function on $\R^n$.
        \end{enumerate}

        \tcblower
        \ 

        (a):

        Suppose that \(f\) extends to a differentiable function \(\hat{f}\) on an open set \(U \supseteq A\). That is, \(\hat{f}\vert _A = f\). Let \(x \in A\). Since \(U\) is open, we can find an open ball such that \(B(x, \varepsilon) \subseteq U\). Immediately, we get that the function \(\hat{f} \vert _{B(x,\varepsilon)}\) is the desired extension of \(f\) at \(x\), as \(\hat{f}\) is differentiable at \(x\) and \(\hat{f}\vert _{B(x,\varepsilon) \cap A} = f_{B(x,\varepsilon) \cap A}\).

        % \smallbreak

        Conversely, suppose that \(f\) is differentiable at every point of \(A\). For all \(p_a \in A\), there exists an open neighborhood \(U_a\) of \(p_a\) and a function \(f_a : U_a \to \mathbb{R}\) that is differentiable at \(p_a\) and \(f_a \vert _{U_a \cap A} = f \vert U \cap A\). Notice that \(U = \{U_a\}_{a \in I}\) forms an open cover of \(A\). Thus we can find a partition of unity \(\{ \varphi _a : \mathbb{R}^n \to [0,1]\}_{a\in I}\) subordinate to \(U\). In particular,
        \begin{itemize}
            \item \(\varphi _a \in C^{\infty}\),
            \item \(\mathop{\mathrm{supp}}(\varphi _a)\cap U \subseteq U_a\),
            \item \(\{\mathop{\mathrm{supp}}(\varphi_a)\}\) is locally finite,
            \item \(\sum\limits_{a \in I} \varphi _a = 1\).
        \end{itemize}
        We claim that \(\hat{f} = \sum_{a \in I} \varphi _a \cdot f_a\) is the differentiable function that extends \(f\) to \(\{ U_a \} _{a \in I}\). First, note that this sum is well defined because the partition of unity is locally finite, so the sum is finite at every point, and as well, any point outside the domain of \(f_a\) implies that \(\varphi _a = 0\), so \(\varphi _a \cdot f_a = 0\).

        Moreover, for all \(x \in U\), since \(\{ \varphi _a \}_{a \in I}\) is locally finite, for some open neighborhood \(V\) of \(x\), for some finite sequence of \(a_n \in I\),
        \[
            \hat{f}(y) = \sum_{n=1}^{N} \varphi _{a_n} (y) \cdot f_{a_n}(y), \text{ where } y \in V.
        \]
        Since each term is differentiable, \(\hat{f}\) is differentiable at \(x\). Thus \(\hat{f}\) is differentiable on the entirety of \(U\). Additionally, for each \(a_n\), \(x \in U_{a_n}\), so by our initial assumption,
        \[
            \sum_{n=1}^{N} \varphi _{a_n} (x) \cdot f_{a_n}(x) = f(x) \cdot \sum_{n=1}^{N} \varphi _{a_n} (x) = f(x)
        \]
        which shows that \(\hat{f}\vert _A = f\) as needed.

        \medskip

        (b):

        Suppose that \(A\) is a closed set.

        The converse of this statement is exactly the same as the previous part, so we will omit the proof.

        Suppose that \(f\) is differentiable at every point of \(A\). By the previous part, \(f\) extends to a differentiable function \(\widetilde{f}\) on some open set \(U\) that contains \(A\). We want to find an open set \(V\) such that \(A \subseteq V \subseteq \cl{V} \subseteq U\). We see that the set \(V = \left\{ x \in \mathbb{R}^n : \mathrm{dist}_A (x) < \dfrac{\mathrm{dist}(A, U^c)}{2}\right\}\) is sufficient. It is pretty immediate that \(A \subseteq V\), as any element of \(A\) has distance 0 from \(A\). As well, if we let \(v \in \cl{V}\), since \(v\) is a limit point of \(V\) we can find \(v' \in V\) such that \(\|v - v'\| < \dfrac{\mathrm{dist}(A, U^c)}{4}\). Furthermore, by the definition of infimum we can find \(a \in A\) such that \(\|v' - a \| < \mathrm{dist}_A (x) +  \dfrac{\mathrm{dist}(A, U^c)}{4} < \dfrac{3\mathrm{dist}(A, U^c)}{4}\). Thus we have that
        \[
            \|a - v\| \leq \|a - v'\| + \|v' - v\| < \mathrm{dist}(A, U^c)
        \]
        For all \(w \in U^c\),
        \[
            \|w - v\| \geq \|w - a\| - \|a - v\| > \mathrm{dist}(A, U^c) - \mathrm{dist}(A, U^c) = 0
        \]
        which implies that \(v \notin U^c\), so \(v \in U\) and \(\cl{V} \subseteq U\).
        
        Now, notice that \(A^c\) is open and \(A^c \cup V = \mathbb{R}^n\). Thus \(\{ A^c, V \}\) form an open cover of \(\mathbb{R}^n\), so we can find a partition of unity \(\{\varphi_{A^c}, \varphi_{V}\}\) subordinate to \(\{ A^c, V \}\). We claim that our desired function \(\widehat{f}\) is given by
        \[
            \widehat{f} = \widetilde{f} \cdot \varphi_{V}.
        \]
        This function is well defined, as outside of the domain of \(\widetilde{f}\), it is identitally equal to 0.

        First, we will show that \(\widehat{f}\) is differentiable on \(\mathbb{R}^n\). Let \(p \in \mathbb{R}^n\), and begin by considering the case when \(p \in \cl{V} \subseteq U\). Then for some small enough neighborhood \(W\) of \(p\), for all \(x \in W\),
        \[
            \widehat{f}(x) = \widetilde{f} (x) \cdot \varphi_V (x)
        \]
        so \(\widehat{f}\) is differentiable at \(p\).

        If \(p \in \mathbb{R}^n \setminus \cl{V}\), then it is also true that \(p \notin V\), which is outside of \(\mathop{\mathrm{supp}}(\varphi_V)\). Thus, using the fact that \(\mathbb{R}^n \setminus \cl{V}\) is open, we get an open neighborhood \(W'\) of \(p\) such that
        \[
            \widehat{f}(x) = 0, \text{ for } x \in W'.
        \]
        so \(\widehat{f}\) is differentiable at \(p\).

        Now, we show that it is a valid extension of \(f\). For all \(x \in A\), notice that \(\varphi_{A^c} \vert _A \equiv 0\), so it must be true that \(\varphi _V \vert _A \equiv 1\). Then it follows that
        \[
            \widehat{f} \vert _A = \widetilde{f}\vert _A = f \vert _A
        \]
        and the proof is complete.
 \end{question}
    \newpage
    \begin{question}{37}
        The following set is called the \textbf{$n$-simplex}:
        \[ \Delta_n := \{ \vec{x}=(x_1,\ldots,x_n)\in \R^n : x_1,\ldots,x_n\geq 0 \text{ and } x_1+\cdots+x_n\leq 1\}. \]
        You can assume, without proof, that $\Delta_n$ is Jordan measurable.
        
        Find, with proof, an explicit formula for $\mu(\Delta_n)$ in terms of $n$.

        \tcblower

        First, we show that \(\Delta _n\) is the same as the set
        \[
            S = \left\{ (x_1, ..., x_n) \in \mathbb{R}^n : 0\leq x_1 \leq 1, 0 \leq x_2 \leq 1 - x_1, ..., 0 \leq x_n \leq 1 - \sum_{i=1}^{n-1} x_i \right\}
        \]
        Let \(x \in \Delta _n\). We want to show that \(0 \leq x_i \leq 1 - \sum_{j=1}^{i - 1} x_j\). We get that \(x_i \geq 0\) immediately. As well, since \(\sum_{j=1}^{n} x_j \leq 1\) and every component is non-negative, we have that
        \[
            x_i \leq 1 - \sum_{j=1}^{i - 1} x_j - \sum_{j=i+1}^{n} x_j \leq 1 - \sum_{j=1}^{i - 1} x_j
        \]
        which shows that \(\Delta _n \subseteq S\).

        Now, let \(x \in S\). We know every \(x_i\) is non-negative and additionally
        \[
            x_n \leq 1 - \sum_{i=1}^{n-1} x_i \implies \sum_{i=1}^{n} x_i \leq 1
        \]
        so \(S \subseteq \Delta _n\).

        Now, we proceed to find \(\mu (S) = \mu (\Delta _n)\). Using Fubini's Theorem, we get
        \[
            \mu (S) = \int _S 1 = \int _0^1 \int _0^{1-x_1} \cdots \int _0^{1 - \sum_{i=1}^{n-1} x_i} 1\ dx_n \cdots dx_2\ dx_1
        \]
        Let \(I: \mathbb{N} \times [0,1] \to \mathbb{R}\) be defined recursively as follows:
        % \[
        %     \begin{dcases*}
        %         I(1, \alpha) = \int _0^{1-\alpha} 1\ dt,\\
        %         I(n, \alpha) = \int _0^{1-\alpha} I(n-1, \alpha + t)\ dt, &\text{ for } n > 1 .
        %     \end{dcases*}
        % \]
        \begin{align*}
            I(1, \alpha) &= \int _0^{1-\alpha} 1\ dt &\ \\
            I(k, \alpha) &= \int _0^{1-\alpha} I(k-1, \alpha + t)\ dt, &\text{ for } > 1.
        \end{align*}
        Notice that if we continue applying the definition, we get that
        \[
            I(n, 0) = \mu (S)
        \]
        Now, we will prove using induction on \(n\) that for all \(\alpha \in [0,1]\), \(I(n, \alpha) = \dfrac{1}{n!}(1 - \alpha)^n\).

        Let \(n = 1\). Then
        \[
            I(1, \alpha) = \int _0^{1- \alpha}1\ dt = 1 - \alpha
        \]
        Now, suppose that \(I(k, \alpha) = \dfrac{1}{k!}(1 - \alpha)^k\) holds for all \(\alpha \in [0,1]\) and some \(k \in \mathbb{N}\). We want to show that the same holds for \(k + 1\) as well. For an arbitrary \(\alpha\), we get
        \begin{align*}
            I(k+1, \alpha ) &= \int _0^{1 - \alpha} I(k, \alpha + t)\ dt \\
            &= \int _0^{1-\alpha} \frac{1}{k!}(1 - \alpha - t)^k\ dt \\
            &= -\frac{1}{(k+1)!}(1 - \alpha - t)^{k+1} \Big| _0^{1-\alpha} \\
            &= \frac{1}{(k+1)!}(1 - \alpha)^{k+1}
        \end{align*}
        as desired. Thus we get that
        \[
            \mu (S) = I(n, 0) = \frac{1}{n!}
        \]
    \end{question}
\end{document}